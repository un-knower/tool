<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       classpath:/org/springframework/beans/factory/xml/spring-beans-3.1.xsd"
       default-lazy-init="true">

    <bean id="hcatserver" class="com.hiido.hcat.service.HttpHiveServer" scope="singleton">
        <constructor-arg value="0.0.0.0" />
        <constructor-arg value="26018" />
        <property name="tokenVerifyStone" ref="tokenverifystone"/>
        <property name="connPool" ref="conn_pool_84" />
    </bean>

    <bean id="mysql_84" class="com.hiido.suit.common.util.JdbcConn" scope="prototype">
        <property name="driverName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://10.21.38.59:3306/test?useUnicode=true&amp;characterEncoding=utf-8&amp;autoReconnect=true" />
        <property name="username" value="hiidosys" />
        <property name="password" value="01bd8bf80ef9fe0d0cbcdbb7d938548e" />
    </bean>

    <bean id="conn_pool_84" class="com.hiido.suit.common.util.ConnectionPool" scope="singleton">
        <property name="jdbcConn" ref="mysql_84" />
    </bean>

    <bean id="tokenverifystone" class="com.hiido.suit.TokenVerifyStone" scope="singleton">
        <property name="userMapVarifier" ref="dwpassport_hcatuser_map_verifier" />
        <property name="userPasswdProvider" ref="simple_passwd_provider" />
        <property name="keystoneCipherVerifier" ref="keystone_cipherkey_verifier" />
        <property name="keyStoneClient" ref="keystoneclient" />
        <property name="truststore" value="hiohadoopcli.cer" />
        <property name="truststorePasswd" value="hiohadoopclinottellyou" />
    </bean>

    <bean id="dwpassport_hcatuser_map_verifier" class="com.hiido.suit.security.DwpassportBususerMapVerifier" scope="singleton">
        <property name="refleshInterval" value="300" />
        <property name="connPool" ref="conn_pool_84" />
    </bean>

    <bean id="simple_passwd_provider" class="com.hiido.suit.security.UserPasswdProvider" scope="singleton">
        <property name="ver" value="1.02" />
        <property name="cliUserName" value="superman" />
        <property name="cliPasswd" value="032ce83b465499938dhg77d8bc9ef7fc" />
        <property name="client" ref="sc_http_ha_pool_client" />
    </bean>

    <bean id="sc_http_ha_pool_client" class="com.hiido.suit.net.http.protocol.ha.HttpHAPoolClient" scope="prototype">
        <property name="addrList" value="14.17.112.136:26008;14.17.112.205:26008;" />
        <property name="poolOneTryCount" value="3" />
        <property name="poolOneTryInterval" value="0" />
        <property name="alwaysTry" value="true" />
        <property name="httpProtocolClient" ref="sc_http_apache_client" />
        <property name="clientNum" value="-1" />
    </bean>

    <bean id="sc_http_apache_client" class="com.hiido.suit.net.http.protocol.HttpApacheClient" scope="prototype">
        <property name="connectTimeout" value="30000" />
        <property name="readTimeout" value="30000" />
    </bean>

    <bean id="keystone_cipherkey_verifier" class="com.hiido.suit.security.CipherKeyVerifier" scope="singleton">
        <property name="cipherKey" value="true" />
        <property name="cipherKeyTimeout" value="600000" />
    </bean>

    <bean id="keystoneclient" class="com.hiido.suit.KeyStoneClient" scope="singleton">
        <property name="cipher" ref="keystone_tranpsport_cipher"/>
        <property name="client" ref="keystone_http_client" />
    </bean>

    <bean id="keystone_tranpsport_cipher"
          class="com.hiido.suit.security.HttpEncryptedTransportCipher"
          scope="prototype">
    </bean>

    <bean id="keystone_http_client" class="com.hiido.suit.net.http.protocol.ha.HttpHAPoolClient" scope="prototype">
        <property name="addrList" value="14.17.112.136:26016;14.17.112.205:26016" />
        <property name="poolOneTryCount" value="2" />
        <property name="poolOneTryInterval" value="0" />
        <property name="alwaysTry" value="true" />
        <property name="httpProtocolClient" ref="sc_http_apache_client" />
    </bean>


</beans>
